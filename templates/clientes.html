{% extends "base.html" %}
{% block conteudo %}

<div class="card">
  <h1>Clientes</h1>
  <p>Cadastre e gerencie clientes (telefone = DDD + nÃºmero, apenas nÃºmeros).</p>
</div>

<div class="row">

  <div class="card" style="flex:1; min-width:280px;">
    <h3>Novo cliente</h3>

    <form method="POST" style="display:grid; gap:12px; margin-top:10px;">
      <div>
        <label>Nome</label>
        <input name="nome" required autocomplete="name" placeholder="Ex: JoÃ£o Silva">
      </div>

      <div>
        <label>Telefone (WhatsApp)</label>
        <input name="telefone"
               required
               inputmode="numeric"
               pattern="[0-9]{10,11}"
               maxlength="11"
               autocomplete="tel"
               placeholder="Ex: 11999999999"
               title="Digite apenas nÃºmeros (DDD + nÃºmero)">
      </div>

      <button class="btn" type="submit">Cadastrar cliente</button>
    </form>
  </div>

  <div class="card" style="flex:2; min-width:320px; padding:0;">
    <div class="table-wrap">
      <table class="table">
        <tr>
          <th>Nome</th>
          <th>Telefone</th>
          <th style="width:180px;">AÃ§Ãµes</th>
        </tr>

        {% if clientes|length == 0 %}
          <tr>
            <td colspan="3" style="padding:18px; color:var(--muted); font-weight:800;">
              Nenhum cliente cadastrado ainda.
            </td>
          </tr>
        {% endif %}

        {% for c in clientes %}
        <tr>
          <td>{{ c[1] }}</td>
          <td>{{ c[2] }}</td>
          <td>
            <a class="link" href="/clientes/{{ c[0] }}/editar">Editar</a>
            &nbsp;â€¢&nbsp;
            <form method="POST" action="/clientes/{{ c[0] }}/excluir" style="display:inline;"
                  onsubmit="return confirm('Tem certeza que deseja excluir este cliente?');">
              <button class="icon-btn" type="submit">ðŸ—‘</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </table>
    </div>
  </div>

</div>

{% endblock %}
